<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>SparkPlay</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">

<style>
:root {
  --rossa-morbida: #ff5e6c;
  --blu-spaziale: #00d2ff;
  --giallo-stella: #ffe66d;
  --sfondo-profondo: #0a1128;
  --bianco-latte: #f7fff7;
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body { 
  margin: 0; 
  background-color: var(--sfondo-profondo); 
  font-family: 'Quicksand', sans-serif; 
  color: var(--bianco-latte); 
  height: 100vh;
  overflow: hidden;
  /* Stelle fluttuanti senza blocchi */
  background-image: 
    radial-gradient(1px 1px at 25% 15%, white, transparent),
    radial-gradient(1px 1px at 50% 40%, white, transparent),
    radial-gradient(2px 2px at 75% 65%, var(--giallo-stella), transparent),
    radial-gradient(1px 1px at 15% 85%, white, transparent),
    radial-gradient(2px 2px at 85% 25%, white, transparent);
  background-size: 100% 100%;
}

.sp-root { 
  max-width: 600px; 
  margin: 0 auto; 
  height: 100vh;
  display: flex;
  flex-direction: column;
  padding: env(safe-area-inset-top) 25px env(safe-area-inset-bottom);
}

/* Header pulito */
.sp-top { 
  display: flex; 
  justify-content: space-between; 
  align-items: center;
  padding: 20px 0;
}

.brand { 
  font-family: 'Fredoka One', cursive;
  font-size: 32px;
  color: var(--giallo-stella);
  text-shadow: 2px 2px var(--rossa-morbida);
}

/* Area contenuti senza contenitori grigi */
.content-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 30px;
  justify-content: center;
}

.testo-storia {
  font-size: 22px;
  line-height: 1.4;
  text-align: center;
  font-weight: 500;
}

.obiettivo-box {
  background: rgba(0, 210, 255, 0.15);
  border: 3px dashed var(--blu-spaziale);
  border-radius: 25px;
  padding: 20px;
  text-align: center;
  font-weight: 700;
  font-size: 24px;
  color: var(--blu-spaziale);
}

.passaggi {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.passo { 
  padding: 20px; 
  border-radius: 30px; 
  background: rgba(255, 255, 255, 0.08);
  font-size: 20px;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 15px;
  transition: 0.3s;
}

.passo.attivo { 
  background: var(--bianco-latte);
  color: var(--sfondo-profondo);
  transform: scale(1.05);
  box-shadow: 0 10px 30px rgba(255, 230, 109, 0.3);
}

.passo.sfumato { opacity: 0.25; }

.numero {
  background: var(--rossa-morbida);
  color: white;
  width: 40px; height: 40px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Fredoka One';
  flex-shrink: 0;
}

/* Pulsanti Morbidi */
.controlli {
  display: flex;
  gap: 20px;
  padding-bottom: 30px;
}

.btn {
  flex: 1;
  border: none;
  border-radius: 35px;
  padding: 22px;
  font-family: 'Fredoka One', cursive;
  font-size: 20px;
  cursor: pointer;
  transition: 0.2s;
  box-shadow: 0 6px 0px rgba(0,0,0,0.2);
}

.btn:active { transform: translateY(4px); box-shadow: 0 2px 0px rgba(0,0,0,0.2); }

.btn-avanti { background: var(--rossa-morbida); color: white; }
.btn-indietro { background: #4a5568; color: white; }

.pianeta { font-size: 100px; text-align: center; }
</style>
</head>
<body>

<div id="SPARKPLAY_APP" class="sp-root"></div>

<script>
(()=>{"use strict";
const MISSIONI = [
  {titolo:"SEGNALE PERDUTO", badge:"üì°", storia:"La base ha perso il segnale! La galassia √® al buio!", obiettivo:"RIACCENDI L'ANTENNA!", passaggi:["Trova un calzino (l'antenna).","Portalo sulla base (tappeto).","D√¨ 3 Bip! lentamente."], finale:"SEGNALE RIPRISTINATO!"}
];

let stato = { schermata:"INIZIO", passo:0, missione:null };

function disegna(){
  const contenitore = document.getElementById("SPARKPLAY_APP");
  
  if(stato.schermata === "INIZIO"){
    contenitore.innerHTML = `
      <div class="sp-top"><div class="brand">SPARKPLAY üöÄ</div></div>
      <div class="content-area">
        <div class="pianeta">ü™ê</div>
        <h1 style="font-family:'Fredoka One'; font-size:45px; color:var(--giallo-stella); text-align:center;">PRONTI?</h1>
        <button class="btn btn-avanti" onclick="inizia()">VIA ALLA MISSIONE!</button>
      </div>`;
  } else {
    const m = stato.missione;
    contenitore.innerHTML = `
      <div class="sp-top">
        <div class="brand" style="font-size:20px;">MISSIONE</div>
        <button class="btn btn-indietro" style="padding:10px 20px; flex:0; font-size:14px;" onclick="esci()">ESCI</button>
      </div>
      <div class="content-area">
        <div class="testo-storia">${m.storia}</div>
        <div class="obiettivo-box">${m.obiettivo}</div>
        <div class="passaggi">
          ${m.passaggi.map((testo, i) => `
            <div class="passo ${i === stato.passo ? 'attivo' : (i < stato.passo ? '' : 'sfumato')}">
              <div class="numero">${i + 1}</div> ${testo}
            </div>
          `).join('')}
        </div>
        <div class="controlli">
          <button class="btn btn-indietro" onclick="precedente()" ${stato.passo===0?'style="visibility:hidden"':''}>INDIETRO</button>
          <button class="btn btn-avanti" onclick="successivo()">${stato.passo < m.passaggi.length - 1 ? 'AVANTI' : 'FINITO! ‚úÖ'}</button>
        </div>
      </div>`;
  }
}

window.inizia = () => { stato.schermata="GIOCO"; stato.missione=MISSIONI[0]; stato.passo=0; disegna(); };
window.esci = () => { stato.schermata="INIZIO"; disegna(); };
window.precedente = () => { if(stato.passo > 0) { stato.passo--; disegna(); } };
window.successivo = () => {
  if(stato.passo < stato.missione.passaggi.length - 1) {
    stato.passo++; disegna();
  } else {
    alert("EVVIVA! MISSIONE COMPIUTA! üåü");
    esci();
  }
};
disegna();
})();
</script>
</body>
</html>
